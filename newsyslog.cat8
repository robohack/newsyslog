NEWSYSLOG(8)                                         NEWSYSLOG(8)





NNAAMMEE
       newsyslog - maintain system log files to manageable sizes

SSYYNNOOPPSSIISS
       //uussrr//bbiinn//nneewwssyysslloogg [ --vvnnrr ] [ --ff _c_o_n_f_i_g_u_r_a_t_i_o_n _f_i_l_e ]

DDEESSCCRRIIPPTTIIOONN
       _N_e_w_s_y_s_l_o_g  is  a  program  that should be scheduled to run
       periodically by _c_r_o_n_t_a_b.  When it is executed it  archives
       log  files  if  necessary.  If a log file is determined to
       require archiving, _n_e_w_s_y_s_l_o_g rearranges the files so  that
       ``logfile''  is empty, ``logfile.0'' has the last period's
       logs in it, ``logfile.1'' has the next  to  last  period's
       logs  in  it,  and so on, up to a user-specified number of
       archived logs.  Optionally the archived logs can  be  com­
       pressed to save space.

       A  log  can  be  archived because of two reasons.  The log
       file can have grown bigger than a  preset  size  in  kilo­
       bytes,  or a preset number of hours may have elapsed since
       the last log archive.  The  granularity  of  _n_e_w_s_y_s_l_o_g  is
       dependent  on how often it is scheduled to run in crontab.
       Since the program is quite fast, it may  be  scheduled  to
       run every hour without any ill effects.

       When  starting up, _n_e_w_s_y_s_l_o_g reads in a configuration file
       to determine which logs should be looked at.  By  default,
       this configuration file is _/_e_t_c_/_n_e_w_s_y_s_l_o_g_._c_o_n_f.  Each line
       of the file contains information about  a  particular  log
       file  that  should be handled by _n_e_w_s_y_s_l_o_g.  Each line has
       five mandatory fields and  two  optional  fields,  with  a
       whitespace  separating  each  field.  Blank lines or lines
       beginning with ``#'' are ignored.  The fields of the  con­
       figuration file are as follows:
            logfile name
            owner.group of archives (optional)
            mode of logfile & archives
            number of archives
            size of archives
            archive interval
            flags (optional)

       The  _l_o_g_f_i_l_e _n_a_m_e entry is the name of the system log file
       to be archived.

       The optional _o_w_n_e_r_._g_r_o_u_p entry specifies an ownership  and
       group for the archive file.  The "." is essential, even if
       the _o_w_n_e_r or _g_r_o_u_p field is left blank. The fields may  be
       numeric,  or  a  name which is looked up in _/_e_t_c_/_p_a_s_s_w_d or
       _/_e_t_c_/_g_r_o_u_p.

       The _n_u_m_b_e_r _o_f  _a_r_c_h_i_v_e_s  entry  specifies  the  number  of
       archives to be kept besides the log file itself.




Project Athena           January 12, 1989                       1





NEWSYSLOG(8)                                         NEWSYSLOG(8)


       When the size of the logfile reaches _s_i_z_e _o_f _a_r_c_h_i_v_e_s, the
       logfile becomes trimmed as described above.  If this field
       is  replaced  by  a ``*'', then the size of the logfile is
       not taken into account when determining when to  trim  the
       log file.

       The  _n_u_m_b_e_r  _o_f  _h_o_u_r_s entry specifies the time separation
       between the trimming of the log file.  If  this  field  is
       replaced  by  a  ``*'', the number of hours since the last
       time the log was trimmed will not be taken into considera­
       tion.

       The  _f_l_a_g_s field specifies if the archives should have any
       special processing done to the archived  log  files.   The
       ``Z''  flag will make the archive files compressed to save
       space using /usr/bin/gzip.  The ``B'' flag means that  the
       file  is  a  binary  file,  and so the ascii message which
       _n_e_w_s_y_s_l_o_g inserts to indicate the fact that the logs  have
       been turned over should not be included.


OOPPTTIIOONNSS
       The following options can be used with newsyslog:

       --ff _c_o_n_f_i_g_-_f_i_l_e
              instructs  newsyslog  to use _c_o_n_f_i_g_-_f_i_l_e instead of
              /etc/newsyslog.conf for its configuration file.

       --vv     places _n_e_w_s_y_s_l_o_g in verbose mode.  In this mode  it
              will  print out each log and its reasons for either
              trimming that log or skipping it.

       --nn     causes _n_e_w_s_y_s_l_o_g not to trim the logs, but to print
              out what it would do if this option were not speci­
              fied.

       --rr     removes the restriction that _n_e_w_s_y_s_l_o_g must be run­
              ning  as  root.   Of  course, _n_e_w_s_y_s_l_o_g will not be
              able to send a  HUP  signal  to  _s_y_s_l_o_g_d,  so  this
              option should only be used in debugging.

FFIILLEESS
       /etc/newsyslog.conf

BBUUGGSS
       Doesn't  yet  automatically read the logs to find security
       breaches.



AAUUTTHHOORR
       Theodore Ts'o, MIT Project Athena
       Copyright 1987, Massachusetts Institute of Technology




Project Athena           January 12, 1989                       2





NEWSYSLOG(8)                                         NEWSYSLOG(8)


SSEEEE AALLSSOO
       syslogd(8), syslog(3), gzip(1)























































Project Athena           January 12, 1989                       3


